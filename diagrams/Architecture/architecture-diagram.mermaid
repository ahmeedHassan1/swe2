---
title: System Architecture Diagram - Microservices Overview
---
graph TB
    subgraph "Client Layer"
        Browser[Web Browser<br/>Chrome/Firefox/Safari/Edge]
    end
    
    subgraph "Frontend Layer - Port 3000"
        NextJS[Next.js 14 Frontend<br/>React + Tailwind CSS]
        AuthContext[Auth Context<br/>JWT Token Management]
        Pages[Pages:<br/>Login, Dashboard, Employees,<br/>Attendance, Leaves,<br/>Payroll, Announcements]
    end
    
    subgraph "API Gateway Layer - Port 8080"
        Gateway[Spring Cloud Gateway<br/>API Gateway]
        AuthFilter[Authentication Filter<br/>JWT Validation]
        RouteValidator[Route Validator]
    end
    
    subgraph "Service Discovery - Port 8761"
        Eureka[Netflix Eureka Server<br/>Service Registry]
    end
    
    subgraph "Microservices Layer"
        direction TB
        
        subgraph "Auth Service - 8081"
            AuthController[Auth Controller]
            AuthService[Auth Service<br/>JWT Generation<br/>Password Encryption]
            AuthRepo[(User Repository)]
            AuthDB[(PostgreSQL<br/>users)]
        end
        
        subgraph "Employee Service - 8082"
            EmpController[Employee Controller<br/>@AdminOnly]
            EmpService[Employee Service<br/>CRUD Operations]
            EmpRepo[(Employee Repository)]
            EmpDB[(PostgreSQL<br/>employees)]
        end
        
        subgraph "Attendance Service - 8083"
            AttController[Attendance Controller]
            AttService[Attendance Service<br/>Clock In/Out Logic<br/>Work Hours Calculation]
            AttRepo[(Attendance Repository)]
            AttDB[(PostgreSQL<br/>attendance)]
        end
        
        subgraph "Leave Service - 8084"
            LeaveController[Leave Controller<br/>@AdminOnly for approvals]
            LeaveService[Leave Service<br/>Request & Approval Workflow]
            LeaveRepo[(Leave Repository)]
            LeaveDB[(PostgreSQL<br/>leaves)]
        end
        
        subgraph "Payroll Service - 8085"
            PayController[Payroll Controller<br/>@AdminOnly]
            PayService[Payroll Service<br/>Salary Calculation<br/>Bonus & Deductions]
            PayRepo[(Payroll Repository)]
            PayDB[(PostgreSQL<br/>payroll)]
        end
        
        subgraph "Announcement Service - 8086"
            AnnController[Announcement Controller<br/>@AdminOnly for create]
            AnnService[Announcement Service<br/>Create & Retrieve]
            AnnRepo[(Announcement Repository)]
            AnnDB[(PostgreSQL<br/>announcements)]
        end
    end
    
    %% Client to Frontend
    Browser -->|HTTPS| NextJS
    NextJS --> AuthContext
    NextJS --> Pages
    
    %% Frontend to Gateway
    Pages -->|REST API<br/>Bearer Token| Gateway
    
    %% Gateway Components
    Gateway --> AuthFilter
    AuthFilter --> RouteValidator
    
    %% Gateway to Services
    Gateway -->|/api/auth/**| AuthController
    Gateway -->|/api/employees/**| EmpController
    Gateway -->|/api/attendance/**| AttController
    Gateway -->|/api/leaves/**| LeaveController
    Gateway -->|/api/payroll/**| PayController
    Gateway -->|/api/announcements/**| AnnController
    
    %% Service Discovery
    Gateway -.->|Register & Discover| Eureka
    AuthController -.->|Register| Eureka
    EmpController -.->|Register| Eureka
    AttController -.->|Register| Eureka
    LeaveController -.->|Register| Eureka
    PayController -.->|Register| Eureka
    AnnController -.->|Register| Eureka
    
    %% Auth Service Flow
    AuthController --> AuthService
    AuthService --> AuthRepo
    AuthRepo --> AuthDB
    
    %% Employee Service Flow
    EmpController --> EmpService
    EmpService --> EmpRepo
    EmpRepo --> EmpDB
    
    %% Attendance Service Flow
    AttController --> AttService
    AttService --> AttRepo
    AttRepo --> AttDB
    
    %% Leave Service Flow
    LeaveController --> LeaveService
    LeaveService --> LeaveRepo
    LeaveRepo --> LeaveDB
    
    %% Payroll Service Flow
    PayController --> PayService
    PayService --> PayRepo
    PayRepo --> PayDB
    
    %% Announcement Service Flow
    AnnController --> AnnService
    AnnService --> AnnRepo
    AnnRepo --> AnnDB
    
    %% Logical Relationships (Cross-Service)
    AuthDB -.->|user_id link| EmpDB
    EmpDB -.->|employee_id| AttDB
    EmpDB -.->|employee_id| LeaveDB
    EmpDB -.->|employee_id| PayDB
    AuthDB -.->|created_by| AnnDB
    
    %% Styling
    classDef frontend fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
    classDef gateway fill:#fff3e0,stroke:#f57c00,stroke-width:2px
    classDef service fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    classDef database fill:#e8f5e9,stroke:#388e3c,stroke-width:2px
    classDef eureka fill:#fce4ec,stroke:#c2185b,stroke-width:2px
    
    class Browser,NextJS,AuthContext,Pages frontend
    class Gateway,AuthFilter,RouteValidator gateway
    class Eureka eureka
    class AuthController,AuthService,EmpController,EmpService,AttController,AttService,LeaveController,LeaveService,PayController,PayService,AnnController,AnnService service
    class AuthDB,EmpDB,AttDB,LeaveDB,PayDB,AnnDB database
