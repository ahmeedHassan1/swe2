---
title: Activity Diagram - Employee Clock In/Out Process
---
graph TD
    Start([Start: Employee on Attendance Page]) --> CheckStatus{Already Clocked In Today?}
    
    CheckStatus -->|No| ShowClockIn[Display Clock In Button]
    ShowClockIn --> ClickClockIn[Employee Clicks Clock In]
    ClickClockIn --> SendClockIn[POST /api/attendance/clock-in]
    SendClockIn --> CreateRecord[Create Attendance Record]
    CreateRecord --> CaptureTime[Set clockInTime = now]
    CaptureTime --> CheckTime{Current Time >= 9:00 AM?}
    
    CheckTime -->|Yes| SetLate[Set status = LATE]
    CheckTime -->|No| SetPresent[Set status = PRESENT]
    
    SetLate --> SaveRecord[Save Attendance Record]
    SetPresent --> SaveRecord
    SaveRecord --> ShowSuccess1[Display Success Message]
    ShowSuccess1 --> RefreshPage1[Refresh Page]
    RefreshPage1 --> ShowClockOut
    
    CheckStatus -->|Yes| ShowClockOut[Display Clock Out Button]
    ShowClockOut --> ClickClockOut[Employee Clicks Clock Out]
    ClickClockOut --> SendClockOut[POST /api/attendance/clock-out]
    SendClockOut --> FindRecord{Today's Record Exists?}
    
    FindRecord -->|No| ShowError[Display Error: No Clock-In Found]
    ShowError --> End([End])
    
    FindRecord -->|Yes| UpdateRecord[Update Attendance Record]
    UpdateRecord --> SetClockOut[Set clockOutTime = now]
    SetClockOut --> CalculateHours[Calculate Work Hours]
    CalculateHours --> ComputeDuration[Duration = clockOut - clockIn]
    ComputeDuration --> SetWorkHours[workHours = duration in hours]
    SetWorkHours --> SaveUpdated[Save Updated Record]
    SaveUpdated --> ShowSuccess2[Display Success Message]
    ShowSuccess2 --> RefreshPage2[Refresh Attendance History]
    RefreshPage2 --> End
    
    style Start fill:#90ee90
    style End fill:#ffb6c1
    style CheckStatus fill:#ffd700
    style CheckTime fill:#ffd700
    style FindRecord fill:#ffd700
